<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gym Day</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ff9800">

<style>
body{margin:0;background:#0b0b0b;color:#fff;font-family:system-ui;}
.container{padding:16px; overflow-x:auto;}
h2{text-align:center;}
.exercise-card{
  background:#1a1a1a;
  margin:12px 0;
  padding:12px;
  border-radius:12px;
}
.exercise-card h3{text-align:center;margin:0 0 8px 0;}
table{width:100%;border-collapse:collapse;}
th,td{border:1px solid #222;padding:6px;text-align:center;font-size:14px;}
td input{width:100%;background:#111;border:none;color:#fff;text-align:center;}
td input:focus{outline:1px solid #ff9800;}
button{background:#ff9800;border:none;padding:6px 12px;border-radius:8px;margin-top:6px;cursor:pointer;}
button.delete{background:#ff4444;}
tr.done td{background:#0f0f0f;color:#aaa;}
</style>
</head>
<body>
<div class="container">
  <h2 id="dayTitle">ğŸ‹ï¸ ØªÙ…Ø±ÙŠÙ†Ø§Øª Ø§Ù„ÙŠÙˆÙ…</h2>
  <div id="exercises"></div>
  <button onclick="addExercise()">â• Ø¥Ø¶Ø§ÙØ© ØªÙ…Ø±ÙŠÙ† Ø¬Ø¯ÙŠØ¯</button>
</div>

<script>
let currentDay=localStorage.getItem("currentDay")||"Saturday";
document.getElementById("dayTitle").innerText="ğŸ‹ï¸ "+currentDay;
let gymData=JSON.parse(localStorage.getItem("gymData"))||{};
if(!gymData[currentDay]) gymData[currentDay]={};

function save(){localStorage.setItem("gymData",JSON.stringify(gymData));}

function render(){
  const container=document.getElementById("exercises");
  container.innerHTML="";
  for(let ex in gymData[currentDay]){
    const card=document.createElement("div");
    card.className="exercise-card";
    card.innerHTML=`<h3>${ex}</h3>
      <table>
      <thead>
        <tr><th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©</th><th>Ø§Ù„ÙˆØ²Ù†</th><th>Ø§Ù„Ø¹Ø¯Ø§Øª</th><th>âœ”</th></tr>
      </thead>
      <tbody></tbody>
      </table>
      <button onclick="addSet('${ex}')">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø¬Ù…ÙˆØ¹Ø©</button>
      <button class="delete" onclick="deleteExercise('${ex}')">ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„ØªÙ…Ø±ÙŠÙ†</button>
    `;
    const tbody=card.querySelector("tbody");
    gymData[currentDay][ex].forEach((set,i)=>{
      const tr=document.createElement("tr");
      tr.className=set.done?'done':'';
      tr.innerHTML=`
        <td><input type="number" value="${set.set}" onchange="updateSet('${ex}',${i},'set',this.value)"></td>
        <td><input type="number" value="${set.weight}" onchange="updateSet('${ex}',${i},'weight',this.value)"></td>
        <td><input type="number" value="${set.reps}" onchange="updateSet('${ex}',${i},'reps',this.value)"></td>
        <td><input type="checkbox" ${set.done?'checked':''} onchange="toggleSet('${ex}',${i})"></td>
      `;
      // Swipe ÙŠÙ…ÙŠÙ† Ù„Ø­Ø°Ù Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©
      let startX=0;
      tr.addEventListener('touchstart',e=>{startX=e.touches[0].clientX});
      tr.addEventListener('touchend',e=>{
        let endX=e.changedTouches[0].clientX;
        if(endX-startX>80){
          if(confirm("ğŸ”¥ ØªØ­Ø°Ù Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¯ÙŠØŸ")){
            gymData[currentDay][ex].splice(i,1);
            save(); render();
          }
        }
      });
      tbody.appendChild(tr);
    });
    container.appendChild(card);
  }
}

// Ø¥Ø¶Ø§ÙØ© ØªÙ…Ø±ÙŠÙ† Ø¬Ø¯ÙŠØ¯
function addExercise(){
  let name=prompt("Ø§Ø³Ù… Ø§Ù„ØªÙ…Ø±ÙŠÙ† Ø§Ù„Ø¬Ø¯ÙŠØ¯:");
  if(!name) return;
  if(!gymData[currentDay][name]) gymData[currentDay][name]=[];
  save(); render();
}

// Ø¥Ø¶Ø§ÙØ© Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¯Ø§Ø®Ù„ ØªÙ…Ø±ÙŠÙ†
function addSet(ex){
  gymData[currentDay][ex].push({set:gymData[currentDay][ex].length+1,weight:"",reps:"",done:false});
  save(); render();
}

// ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©
function updateSet(ex,i,key,val){
  gymData[currentDay][ex][i][key]=val;
  save();
}

// ØªÙØ¹ÙŠÙ„/Ø¥Ù„ØºØ§Ø¡ ØªÙ… Ø¹Ù…Ù„ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©
function toggleSet(ex,i){
  gymData[currentDay][ex][i].done=!gymData[currentDay][ex][i].done;
  save(); render();
}

// Ø­Ø°Ù ØªÙ…Ø±ÙŠÙ† ÙƒØ§Ù…Ù„
function deleteExercise(ex){
  if(confirm("ğŸ”¥ ØªØ­Ø°Ù Ø§Ù„ØªÙ…Ø±ÙŠÙ† ÙƒÙ„Ù‡ØŸ")){
    delete gymData[currentDay][ex];
    save(); render();
  }
}

render();
</script>

</body>
</html>
